#### sql 인젝션 툴 제작 전 크롤링 연습

순서 
1. **크롤링하기 + 구조도 만들기 <- 현재단계**
2. 찾은 구조도에서 sql 인젝션 공격 루틴 찾기 
3. 찾은 루틴을 어떻게 자동화 할건지 생각 
4. 찾은 결과를 뿌려주기 
5. GUI는 그냥 대시보드 만들듯이 해도 상관없고, 주된건 파이썬 코드 작성후 그 출력 결과임. 



일단 크롤링 자체는 쉬움. 

구조도를 만들기 위해선 해당 페이지에서 연결되는 모든 URL들을 확인해볼 필요가 있음. 

주로 a태그를 통해 다른 페이지와 연결하므로 a태그 내의 href 를 가지고 링크를 1차적으로 가져옴.

가져온 링크들에는 중복링크도 있을테고, 동일페이지에 다른 인자를 넘겨 불러오는 경우도 있을것임. 

그런 경우들을 다 제외하고, 실질적으로 페이지를 불러오는 경우만 걸러낼 수 있어야함. 

	1. 중복체크
 	2. 문자열 정리
 	3. 불필요한 인자 제거 후 중복 체크 

일단 중복체크부터.  linklist 라는 리스트에 URL들을 집어넣는 과정을 수행하고, 이때 리스트 안에 중복값이 있다면 스킵하는 식으로 진행함. 

그 다음, 하위 URL만 보여주기 위해선 최 상위 도메인 이름은 뺴버리는 작업이 필요함. 

보기 편하게 해주기 위해선 이런 경우는 정돈이 필요하다. 도메인 하위의 페이지 정보만 남길 수 있어야함. 

url 하위에 ? 형태로 get 인자를 넘겨 페이지를 호출하는 경우는 우선 탐지하기 쉬움.  링크에 ?가 들어가는 경우는 get인자를 넘긴다고 판단할 수 있으므로 이러한경우는 ?하위의 문자열을 전부 날려줌. 

이후 , 마지막 / 이후에 숫자가 붙는 경우도 해당 종류 링크에서 게시글 번호등을 인자로 페이지를 호출하는 경우이므로, 이러한 경우도 날려준다.  뒤에서부터 /가 있는지를 찾고, / 기준으로 오른쪽에 있는 문자열이 전부 숫자로만 이뤄졌는지를 판별하여 게시글 인자인지를 판단한다. 

마지막으로, #, 공백문자, / 정도만 들어있는 경우를 걸러주자. 

이렇게 필터링이 끝난 리스트는 최종적으로 중복체크를 하며 다른 리스트에 복사하면 된다.  



그 다음, 페이지 내에서 form이나 input을 통한 입력이 가능한 부분들을 찾아보자. 

가장 간단한건 모든 input태그를 찾아 보는것.  그리고 그중에 text 형식으로 입력 가능한 것 들이 있는지 찾으면 될듯.

그렇게 찾은 input 태그의 상위 form을 찾고, form이 보내는 action이 어딘지까지 찾아보면 되겠다.  목표 URL과 인자로 넘길 input의 id 정도만 가지고 있으면 될듯. 

** 기본적인 경우는 form-action을 찾아가면 되겠지만. 자바스크립트나 ajax등을 이용한 경우 action에 박히지 않을 가능성이 높다.  예외적인 경우에 한하여 목표 URL을 찾아가는 루틴도 만들어봐야할듯. 